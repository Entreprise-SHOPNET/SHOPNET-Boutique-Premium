

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SHOPNET - Dashboard Admin Boutiques Premium</title>
    <link rel="stylesheet" href="DashboardPremium.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="admin-profile">
                    <img src="https://ui-avatars.com/api/?name=Admin&background=00182A&color=fff&size=100" alt="Admin">
                    <h3>Administrateur SHOPNET</h3>
                    <p>Tableau de bord Boutiques Premium</p>
                </div>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                    <li class="active" id="nav-all">
                        <a href="#" onclick="loadAllBoutiques()">
                            <i class="fas fa-store"></i>
                            <span>Toutes les boutiques</span>
                        </a>
                    </li>
                    <li id="nav-pending">
                        <a href="#" onclick="loadPendingBoutiques()">
                            <i class="fas fa-clock"></i>
                            <span>En attente</span>
                            <span id="pending-count" class="badge">0</span>
                        </a>
                    </li>
                    <li id="nav-active">
                        <a href="#" onclick="loadActiveBoutiques()">
                            <i class="fas fa-check-circle"></i>
                            <span>Actives</span>
                        </a>
                    </li>
                    <li id="nav-rejected">
                        <a href="#" onclick="loadRejectedBoutiques()">
                            <i class="fas fa-times-circle"></i>
                            <span>Rejetées</span>
                        </a>
                    </li>
                    <li id="nav-stats">
                        <a href="#" onclick="loadStats()">
                            <i class="fas fa-chart-line"></i>
                            <span>Statistiques</span>
                        </a>
                    </li>
                    <li id="nav-premium">
                        <a href="#" onclick="loadPremiumStats()">
                            <i class="fas fa-crown"></i>
                            <span>Abonnements</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <div class="version">v1.0.0</div>
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    Déconnexion
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="main-header">
                <div class="header-left">
                    <h1 id="page-title">Boutiques Premium</h1>
                    <p id="page-subtitle">Vérifiez et activez les boutiques premium</p>
                </div>
                
                <div class="header-right">
                    <div class="stats-cards">
                        <div class="stat-card">
                            <div class="stat-icon pending">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="total-pending">0</h3>
                                <p>En attente</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon active">
                                <i class="fas fa-store"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="total-active">0</h3>
                                <p>Actives</p>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon revenue">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="stat-info">
                                <h3 id="total-revenue">0$</h3>
                                <p>Revenus</p>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Search & Filters -->
            <div class="search-filters">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="search-input" placeholder="Rechercher par nom boutique, email, téléphone...">
                    <button onclick="searchBoutiques()">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                
                <div class="filters">
                    <div class="filter-group">
                        <label for="filter-status">Statut:</label>
                        <select id="filter-status" onchange="applyFilters()">
                            <option value="">Tous</option>
                            <option value="pending_approval">En attente</option>
                            <option value="active">Active</option>
                            <option value="rejected">Rejetée</option>
                            <option value="suspended">Suspendue</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="filter-plan">Plan:</label>
                        <select id="filter-plan" onchange="applyFilters()">
                            <option value="">Tous</option>
                            <option value="premium">Premium</option>
                            <option value="pro">Pro</option>
                            <option value="basic">Basic</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="filter-date">Date:</label>
                        <select id="filter-date" onchange="applyFilters()">
                            <option value="">Toutes</option>
                            <option value="today">Aujourd'hui</option>
                            <option value="week">Cette semaine</option>
                            <option value="month">Ce mois</option>
                        </select>
                    </div>
                    
                    <button class="refresh-btn" onclick="refreshAll()">
                        <i class="fas fa-sync-alt"></i>
                        Actualiser
                    </button>
                </div>
            </div>

            <!-- Boutiques Table -->
            <div class="boutiques-table-container">
                <table class="boutiques-table">
                    <thead>
                        <tr>
                            <th>ID Boutique</th>
                            <th>Boutique</th>
                            <th>Propriétaire</th>
                            <th>Plan</th>
                            <th>Montant</th>
                            <th>Statut Paiement</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="boutiques-body">
                        <tr>
                            <td colspan="8" style="text-align: center; padding: 50px;">
                                <div class="empty-state">
                                    <i class="fas fa-spinner fa-spin" style="font-size: 48px; margin-bottom: 20px;"></i>
                                    <p>Chargement des boutiques...</p>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="table-footer">
                    <div class="pagination">
                        <button class="page-btn" id="prev-page" onclick="changePage(-1)">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <span id="page-info">Page 1 sur 1</span>
                        <button class="page-btn" id="next-page" onclick="changePage(1)">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <div class="results-info">
                        <span id="results-count">0 résultats</span>
                    </div>
                </div>
            </div>

            <!-- Notification Toast -->
            <div id="notification-toast" class="toast">
                <div class="toast-content">
                    <i class="fas fa-check-circle"></i>
                    <span class="toast-message">Notification</span>
                </div>
                <button class="toast-close" onclick="hideToast()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </main>

        <!-- Boutique Details Modal -->
        <div id="boutique-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Détails de la Boutique <span id="modal-boutique-name">-</span></h2>
                    <button class="modal-close" onclick="closeModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="modal-body">
                    <!-- Section Informations Boutique -->
                    <div class="modal-section">
                        <h3><i class="fas fa-store"></i> Informations de la boutique</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <label>ID Boutique:</label>
                                <span id="modal-boutique-id" class="code-badge">-</span>
                            </div>
                            <div class="info-item">
                                <label>Nom de la boutique:</label>
                                <span id="modal-boutique-name-full">-</span>
                            </div>
                            <div class="info-item">
                                <label>Description:</label>
                                <span id="modal-boutique-description">-</span>
                            </div>
                            <div class="info-item">
                                <label>Catégorie:</label>
                                <span id="modal-boutique-category">-</span>
                            </div>
                            <div class="info-item">
                                <label>Plan:</label>
                                <span id="modal-boutique-plan" class="plan-badge premium">-</span>
                            </div>
                            <div class="info-item">
                                <label>Date création:</label>
                                <span id="modal-boutique-created">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Section Propriétaire -->
                    <div class="modal-section">
                        <h3><i class="fas fa-user"></i> Informations du propriétaire</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <label>Nom complet:</label>
                                <span id="modal-owner-name">-</span>
                            </div>
                            <div class="info-item">
                                <label>Email:</label>
                                <span id="modal-owner-email">-</span>
                            </div>
                            <div class="info-item">
                                <label>Téléphone:</label>
                                <span id="modal-owner-phone">-</span>
                            </div>
                            <div class="info-item">
                                <label>ID Utilisateur:</label>
                                <span id="modal-owner-id" class="code-badge">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Section Paiement -->
                    <div class="modal-section">
                        <h3><i class="fas fa-money-bill-wave"></i> Détails du paiement</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <label>Montant payé:</label>
                                <span id="modal-payment-amount">-</span>
                            </div>
                            <div class="info-item">
                                <label>Devise:</label>
                                <span id="modal-payment-currency">-</span>
                            </div>
                            <div class="info-item">
                                <label>Code transaction:</label>
                                <span id="modal-transaction-code" class="code-badge">-</span>
                            </div>
                            <div class="info-item">
                                <label>Opérateur:</label>
                                <span id="modal-payment-operator" class="operator-badge">-</span>
                            </div>
                            <div class="info-item">
                                <label>Statut paiement:</label>
                                <span id="modal-payment-status" class="status-badge pending">-</span>
                            </div>
                            <div class="info-item">
                                <label>Date paiement:</label>
                                <span id="modal-payment-date">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Section Preuve de paiement -->
                    <div class="modal-section" id="payment-proof-section">
                        <h3><i class="fas fa-camera"></i> Preuve de paiement</h3>
                        <div class="proof-container">
                            <div class="proof-image" id="modal-proof-image">
                                <img src="" alt="Capture d'écran" id="proof-img">
                                <div class="proof-overlay">
                                    <button class="view-full-btn" onclick="viewFullImage()">
                                        <i class="fas fa-expand"></i>
                                        Voir en grand
                                    </button>
                                </div>
                            </div>
                            <div class="proof-actions">
                                <button class="download-btn" onclick="downloadProof()">
                                    <i class="fas fa-download"></i>
                                    Télécharger
                                </button>
                                <button class="zoom-btn" onclick="viewFullImage()">
                                    <i class="fas fa-search-plus"></i>
                                    Zoom
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Section Validation -->
                    <div class="modal-section" id="validation-section">
                        <h3><i class="fas fa-clipboard-check"></i> Vérification et activation</h3>
                        <div class="validation-form">
                            <div class="form-group">
                                <label for="validation-notes">Commentaire de vérification:</label>
                                <textarea id="validation-notes" placeholder="Vérifiez les informations et le paiement..."></textarea>
                            </div>
                            
                            <div class="validation-buttons">
                                <button class="reject-btn" onclick="rejectBoutique()">
                                    <i class="fas fa-times"></i>
                                    Rejeter la demande
                                </button>
                                <button class="validate-btn" onclick="validateBoutique()">
                                    <i class="fas fa-check"></i>
                                    Activer la boutique
                                </button>
                            </div>
                            
                            <!-- Informations supplémentaires pour le rejet -->
                            <div class="rejection-reasons" id="rejection-reasons" style="display: none;">
                                <h4><i class="fas fa-exclamation-triangle"></i> Raisons de rejet</h4>
                                <div class="reasons-list">
                                    <label class="reason-option">
                                        <input type="checkbox" name="rejection-reason" value="proof_unclear">
                                        <span>Preuve de paiement illisible</span>
                                    </label>
                                    <label class="reason-option">
                                        <input type="checkbox" name="rejection-reason" value="amount_mismatch">
                                        <span>Montant incorrect</span>
                                    </label>
                                    <label class="reason-option">
                                        <input type="checkbox" name="rejection-reason" value="invalid_transaction">
                                        <span>Code transaction invalide</span>
                                    </label>
                                    <label class="reason-option">
                                        <input type="checkbox" name="rejection-reason" value="information_missing">
                                        <span>Informations manquantes</span>
                                    </label>
                                    <label class="reason-option">
                                        <input type="checkbox" name="rejection-reason" value="other">
                                        <span>Autre</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Section Statut actuel -->
                    <div class="modal-section status-section">
                        <h3><i class="fas fa-info-circle"></i> Statut actuel</h3>
                        <div class="current-status" id="current-status">
                            <div class="status-indicator pending">
                                <i class="fas fa-clock"></i>
                                <span>En attente de validation</span>
                            </div>
                            <div class="status-history">
                                <h4>Historique des statuts:</h4>
                                <ul id="status-history-list">
                                    <!-- L'historique sera ajouté dynamiquement -->
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Image Fullscreen Modal -->
        <div id="image-modal" class="image-modal">
            <div class="image-modal-content">
                <button class="image-modal-close" onclick="closeImageModal()">
                    <i class="fas fa-times"></i>
                </button>
                <img id="fullscreen-image" src="" alt="Capture d'écran plein écran">
            </div>
        </div>

        <!-- Loading Overlay -->
        <div class="loading-overlay">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <p>Chargement...</p>
            </div>
        </div>
    </div>

    <script src="DashboardPremium.js"></script>
</body>
</html>